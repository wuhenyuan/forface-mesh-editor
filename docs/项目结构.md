# 项目结构

## 根目录
### 配置文件
- .gitignore
- package.json
- pnpm-lock.yaml
- vite.config.js (打包配置)
- vite.dev.config.js (开发配置)
- index.html

## 源代码 (src)

### 入口文件
- index.js (本地开发入口)
- main.js (组件库打包入口)
- App.vue (本地测试根组件)

### 状态管理 (store)
- index.js
- editorStore.js (编辑器状态：功能区、菜单、文字、撤销重做、浮动UI)

### 核心模块 (core)
- index.js
- EventManager.js (事件管理器)
- Viewer.js (基础3D查看器)
- EditorViewer.js (编辑器专用查看器，集成面拾取/文字/物体选择)

### 组件目录 (components)
#### 布局组件
- EditorLayout.vue (主布局容器)
- ToolbarPanel.vue (顶部工具栏)
- FeaturePanel.vue (左侧功能区)
- FeatureMenu.vue (功能菜单)
- PropertyPanel.vue (右侧属性面板)
- WorkspaceViewport.vue (3D工作区)

#### 浮动组件 (floating)
- index.js
- ContextMenu.vue (右键菜单)
- ColorPicker.vue (颜色选择器)
- EditMenu.vue (编辑菜单)
- Tooltip.vue (悬浮提示)

### 工具库 (utils)
#### 面拾取模块 (facePicking)
- FacePicker.js
- OptimizedFacePicker.js
- RaycastManager.js
- SelectionManager.js
- HighlightRenderer.js
- EventHandler.js
- FeatureDetector.js
- FeatureBasedNaming.js
- FeaturePool.js
- VertexBasedIdentifier.js
- DebugLogger.js
- index.js

#### 表面文字模块 (surfaceText)
- SurfaceTextManager.js
- CSGCylinderText.js
- ConfigManager.js
- BooleanOperator.js
- index.js

#### 对象选择模块 (objectSelection)
- ObjectSelectionManager.js
- index.js

## 架构图

```
┌─────────────────────────────────────────────────────────┐
│                      EditorLayout                        │
│  ┌───────────────────────────────────────────────────┐  │
│  │                 editorStore (状态中心)              │  │
│  │  - currentFeature    - textList                   │  │
│  │  - menuVisible       - undoStack/redoStack        │  │
│  │  - contextMenu       - colorPicker                │  │
│  └───────────────────────────────────────────────────┘  │
│         ↑           ↑           ↑           ↑           │
│    ┌────┴────┐ ┌────┴────┐ ┌────┴────┐ ┌────┴────┐     │
│    │Toolbar  │ │Feature  │ │Property │ │Workspace│     │
│    │Panel    │ │Panel    │ │Panel    │ │Viewport │     │
│    └─────────┘ └─────────┘ └─────────┘ └────┬────┘     │
│                                              │          │
│                                    ┌─────────┴────────┐ │
│                                    │   EditorViewer   │ │
│                                    │  ┌────────────┐  │ │
│                                    │  │EventManager│  │ │
│                                    │  └────────────┘  │ │
│                                    │  - FacePicker    │ │
│                                    │  - TextManager   │ │
│                                    │  - ObjectSelect  │ │
│                                    └──────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

## 数据流

```
用户操作 (点击/右键/拖拽)
    ↓
EditorViewer.events.emit()
    ↓
WorkspaceViewport 监听
    ↓
store.action() 更新状态
    ↓
所有组件响应式更新
```
